{% extends 'feedback_layout.html' %}
{% load feedback_tags %}
{% load crispy_forms_tags %}

{% block center %}
    <div class="section">
        <h4>Summary</h4>
        <table class="table table-condensed table-striped hide-rows table-bordered">
            <tr style="text-align: right">
                <th>Module Title</th>
                <th>Satisfied (%)</th>
                <th>Average</th>
                <th>Teaching</th>
                <th>Content</th>
                <th>Facilities</th>
                <th>Admin</th>
                <th>Catering</th>
                <th>Accomm</th>
                <th>Sent</th>
                <th>Returned</th>
            </tr>
            <tr style="text-align: right">
                <td class="feedback-comment">{{ module_score.title }}</td>
                <td>{{ module_score.satisfied | default:'-'}}</td>
                <td>{{ module_score.average }}</td>
                <td>{{ module_score.avg_teaching }}</td>
                <td>{{ module_score.avg_content }}</td>
                <td>{{ module_score.avg_facilities }}</td>
                <td>{{ module_score.avg_admin }}</td>
                <td>{{ module_score.avg_catering }}</td>
                <td>{{ module_score.avg_accommodation }}</td>
                <td>{{ module_score.sent }}</td>
                <td>{{ module_score.returned | default:'-'}}</td>
            </tr>
        </table>
        <hr>
        <h4>Detail</h4>
        {% for key, data in feedback_data_list.items %}
            <table class = "table table-striped table-hover table-bordered">
                <tbody>
                    <tr>
                        <td class="feedback-green feedback-comment">
                            <b>{{ data.student_name }}</b> submitted at {{ data.submitted_on }}
                        </td>
                        <td class="{% score_color data.average %}">{{ data.average | default:'-' }}<br>Average</td>
                        <td class="{% score_color data.teaching %}">{{ data.teaching | default:'-' }}<br>Teaching</td>
                        <td class="{% score_color data.content %}">{{ data.content | default:'-' }}<br>Content</td>
                        <td class="{% score_color data.facilities %}">{{ data.facilities | default:'-' }}<br>Facilities</td>
                        <td class="{% score_color data.admin %}">{{ data.admin | default:'-' }}<br>Admin</td>
                        <td class="{% score_color data.catering %}">{{ data.catering | default:'-' }}<br>Catering</td>
                        <td class="{% score_color data.accommodation %}">{{ data.accommodation | default:'-' }}<br>Accomm</td>
                    </tr>
                    <tr>
                        <td>{{ data.comments }}</td>
                    </tr>
                </tbody>
            </table>
        {% endfor %}
        <hr>

        <h4>Course administrator / director comments</h4>
        <p>Please use to record any follow up actions</p>
        <table class = "table table-striped table-bordered">
            <tbody>
                {% for comment in comments_list %}
                <tr>
                    <td>{{ comment.comment }}</td>
                    <td>{{ comment.uploaded_by }}. {{ comment.uploaded_on }}</td>
                </tr>
                {% endfor %}
            </tbody>
        </table>

        <form method="POST" action=''>
            {% csrf_token %}
            {{ form|crispy }}
            <input type="submit" value="Submit comment and send report to ...">
        </form>

    </div>
{% endblock %}
