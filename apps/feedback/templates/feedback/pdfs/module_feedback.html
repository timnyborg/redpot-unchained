{% load static %}
{% load feedback_tags %}
<head>
    <title>
        Feedback for {{ module_info.title }}({{ module_info.code }})
    </title>
</head>

<h4>Feedback results for {{ module_info.title }}({{ module_info.code }})</h4>

<h4>{{module_info.start_date}}
{%  if module_info.start_date != module_info.end_date %}
 to {{module_info.end_date}}</h4>
{% endif %}
<hr>
<h3>Summary</h3>
<table class = "table table-striped table-hover table-bordered" border = '1'>
    <tr>
    {% for header in module_summary_headers %}
        {% if header == 'Module Title' %}
            <th style="text-align:left;" class="feedback-comment">{{ header }}</th>
        {% else %}
            <th style="text-align:right;">{{ header }}</th>
        {% endif %}
    {% endfor %}
    </tr>
    <tr>
        <td class="feedback-comment">{{ module_summary.title }} ({{ tutors|join:", " }})</td>
        <td style="text-align: right">{{ module_summary.satisfied }}</td>
        <td class="{% score_color module_summary.average %}">{{ module_summary.average }}</td>
        <td class="{% score_color module_summary.teaching %}">{{ module_summary.teaching }}</td>
        <td class="{% score_color module_summary.content %}">{{ module_summary.content }}</td>
        <td class="{% score_color module_summary.facility %}">{{ module_summary.facility }}</td>
        <td class="{% score_color module_summary.admin %}">{{ module_summary.admin }}</td>
        <td class="{% score_color module_summary.catering %}">{{ module_summary.catering }}</td>
        <td class="{% score_color module_summary.accommodation %}">{{ module_summary.accommodation }}</td>
        <td class="feedback-gray">{{ module_summary.sent }}</td>
        <td class="feedback-gray">{{ module_summary.returned }}</td>
    </tr>
</table>
<hr>

<h3>Detail</h3>
<table class = "table table-striped table-hover table-bordered">
    <tbody>
    {% for feedback in feedback_data_dict.values %}
        <tr>
            <td class="feedback-comment feedback-green">
                <b>{{ feedback.name }}</b> submitted at {{ feedback.submitted_on }}
            </td>
            <td class="{% score_color feedback.average %}">{{ feedback.average | default:'-' }}<br>Average</td>
            <td class="{% score_color feedback.teaching %}">{{ feedback.teaching | default:'-' }}<br>Teaching</td>
            <td class="{% score_color feedback.content %}">{{ feedback.content | default:'-' }}<br>Content</td>
            <td class="{% score_color feedback.facilities %}">{{ feedback.facilities | default:'-' }}<br>Facilities</td>
            <td class="{% score_color feedback.admin %}">{{ feedback.admin | default:'-' }}<br>Admin</td>
            <td class="{% score_color feedback.catering %}">{{ feedback.catering | default:'-' }}<br>Catering</td>
            <td class="{% score_color feedback.accommodation %}">{{ feedback.accommodation | default:'-' }}<br>Accomm</td>
        </tr>
        <tr>
            <td colspan="8">{{ feedback.comment | default:'None'}}</td>
        </tr>
    {% endfor %}
    </tbody>
</table>
<hr>

<h4>Course administrator / director comments</h4>
<p>Please use to record any follow up actions</p>
<table class = "table table-striped table-bordered">
    <tbody>
        {% for comment in comments_list %}
        <tr>
            <td>{{ comment.comment }}</td>
            <td>{{ comment.uploaded_by }}. {{ comment.uploaded_on }}</td>
        </tr>
        {% endfor %}
    </tbody>
</table>
{#    {{if result['Average']:}}#}
{#        {{if float(result['Average']) > 3.5:}}#}
{#        <td style="border-bottom: 5px solid green;width:60%;min-width:200px;">#}
{#        {{elif float(result['Average']) > 2.5:}}#}
{#        <td style="border-bottom: 5px solid orange;width:60%;min-width:200px;">#}
{#        {{else:}}#}
{#        <td style="border-bottom: 5px solid red;width:60%;min-width:200px;">#}
{#        {{pass}}#}
{#    {{else:}}#}
{#    <td style="text-align:left;border-bottom: 5px solid gray;width:60%;min-width:200px;">#}
{#    {{pass}}#}
{#    {{Name = 'Anon' if anonymize else (result['Name'] or 'Anon')}}#}
{#        <b>{{=Name}}</b> submitted at {{=result['Submitted'].strftime('%H:%M on %d %b %Y')}}</td>#}
{##}
{#{{for col in cols[2:-2]:}}#}
{#    {{if result[col]:}}#}
{#        {{if float(result[col]) > 3.5:}}#}
{#        <td style="text-align:right;border-bottom: 5px solid green">{{=result[col]}}<br>{{=col}}</td>#}
{#        {{elif float(result[col]) > 2.5:}}#}
{#        <td style="text-align:right;border-bottom: 5px solid orange">{{=result[col]}}<br>{{=col}}</td>#}
{#        {{else:}}#}
{#        <td style="text-align:right;border-bottom: 5px solid red">{{=result[col]}}<br>{{=col}}</td>#}
{#        {{pass}}#}
{#    {{else:}}#}
{#    <td style="text-align:right;border-bottom: 5px solid gray">&ndash;<br>{{=col}}</td>#}
{#    {{pass}}#}
{#    {{pass}}#}
{#</tr><td colspan="8">{{=result['Comments']}}</td>#}
{#{{pass}}#}
{##}
{#</table>#}
{#{{pass}}#}
{#<hr>#}
{#<h3>Course administrator / director comments</h3>#}
{#<p>Please use to record any follow up actions</p>#}
{#<table class = "table table-striped table-hover table-bordered" border = '1'>#}
{##}
{#{{for row in admindetails:}}#}
{#<tr>#}
{#    <td>{{=row.admin_comments}}</td>#}
{#    <td>{{=row.person}}. {{=row.updated}}</td>#}
{#</tr>#}
{#{{pass}}#}
{#</table>#}
