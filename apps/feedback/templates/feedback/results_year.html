{% extends 'layout.html' %}
{% load feedback_tags %}

{% block center %}
    <div class="section">
        <h4>Summary</h4>
        <table class="table table-condensed table-striped hide-rows table-bordered">
            <tr style="text-align: right">
                <th>Year</th>
                <th>Satisfied (%)</th>
                <th>Average</th>
                <th>Teaching</th>
                <th>Content</th>
                <th>Facilities</th>
                <th>Admin</th>
                <th>Catering</th>
                <th>Accomm</th>
                <th>Sent</th>
                <th>Returned</th>
            </tr>
            <tr style="text-align: right">
                <td>{{ year_data.year }}</td>
                <td>{{ year_data.satisfied | default:'-'}}</td>
                <td>{{ year_data.average }}</td>
                <td>{{ year_data.avg_teaching }}</td>
                <td>{{ year_data.avg_content }}</td>
                <td>{{ year_data.avg_facilities }}</td>
                <td>{{ year_data.avg_admin }}</td>
                <td>{{ year_data.avg_catering }}</td>
                <td>{{ year_data.avg_accommodation }}</td>
                <td>{{ year_data.sent }}</td>
                <td>{{ year_data.returned | default:'-'}}</td>
            </tr>
        </table>

        <h4>Detail</h4>
        {% for module_code, data in modules_list.items %}
            <table class = "table table-striped table-hover table-bordered">
                <tbody>
                    <tr>
                        <td class="feedback-green feedback-comment">
                            <a href="{% url 'feedback:results-module' module_code %}">{{ module_code }}</a> - {{ data.module_title }}
                        </td>
                        <td class="{% score_color data.satisfied %}">{{ data.satisfied }}<br>Satisfied</td>
                        <td class="{% score_color data.average %}">{{ data.average }}<br>Average</td>
                        <td class="{% score_color data.avg_teaching %}">{{ data.avg_teaching }}<br>Teaching</td>
                        <td class="{% score_color data.avg_content %}">{{ data.avg_content }}<br>Content</td>
                        <td class="{% score_color data.avg_facilities %}">{{ data.avg_facilities }}<br>Facilities</td>
                        <td class="{% score_color data.avg_admin %}">{{ data.avg_admin }}<br>Admin</td>
                        <td class="{% score_color data.avg_catering %}">{{ data.avg_catering }}<br>Catering</td>

                        <td class="feedback-gray">{{ data.sent }}<br>Sent</td>
                        <td class="feedback-gray">{{ data.returned }}<br>Returned</td>
                    </tr>
                </tbody>
            </table>
        {% endfor %}

    </div>
{% endblock %}
